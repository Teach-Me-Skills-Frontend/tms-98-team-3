function t(t,e,r,s){Object.defineProperty(t,e,{get:r,set:s,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},s={},o={},n=r.parcelRequireb154;null==n&&((n=function(t){if(t in s)return s[t].exports;if(t in o){var e=o[t];delete o[t];var r={id:t,exports:{}};return s[t]=r,e.call(r.exports,r,r.exports),r.exports}var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){o[t]=e},r.parcelRequireb154=n),n.register("27Lyk",(function(e,r){var s,o;t(e.exports,"register",(()=>s),(t=>s=t)),t(e.exports,"resolve",(()=>o),(t=>o=t));var n={};s=function(t){for(var e=Object.keys(t),r=0;r<e.length;r++)n[e[r]]=t[e[r]]},o=function(t){var e=n[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),n("27Lyk").register(JSON.parse('{"a1Xo6":"index.7c7cd6e4.js","aBR22":"1.22564eab.jpeg","ftrUh":"2.3e61ef26.jpeg","MPvta":"tshirt1.ae4247b2.jpeg","58g3Q":"4.751f649a.jpeg","gi2sT":"5.f6760b79.jpeg","cCJ8T":"6.6f3fcb81.jpeg","gbxTc":"7.260fcca7.jpeg","gTinP":"8.0c8a6b92.jpeg","1Qo5A":"9.90db14e5.jpeg","dXdjT":"10.e586ccfd.jpeg","lyKTC":"11.35a756d4.jpeg","d1vay":"12.a30286ca.jpeg","c2cRJ":"13.c3155f6b.jpeg","ii5GQ":"14.7b4d9cfc.jpeg","jKs28":"15.4ebe9d09.jpeg"}'));const i=["Название товара","Цена"];function c(){const t=document.createElement("thead"),e=document.createElement("tr");for(const t of i){const r=document.createElement("th");r.textContent=t,e.append(r)}return t.append(e),t}function a(){const t=document.createElement("tr"),e=document.createElement("td");return e.textContent="В корзине пока нет товаров",e.style.width="100%",e.style.textAlign="center",e.style.fontStyle="italic",t.append(e),t}function d({name:t,price:e}){const r=document.createElement("tr");for(const s of i){const o=document.createElement("td");"Название товара"===s&&(o.textContent=t),"Цена"===s&&(o.textContent=e),r.append(o)}return r}class u{constructor({productsInBasket:t,onClearProductsFromBasket:e,totalPrice:r}){this.basketModalWindow=document.querySelector(".basket__modal"),this.basketContent=document.querySelector(".basket__content"),this.productsWrap=document.querySelector(".purchases"),this.tableHeader=c(),this.tableBody=document.createElement("tbody"),this.clearButton=document.querySelector(".clear"),this.totalPrice=document.querySelector(".result"),this.totalPrice.textContent=`Итого: ${r} р.`,this.ascentBasket=this.ascentBasket(),this.escBasket=this.escBasket(),this.renderProductsInBasket(t),this.productsWrap.append(this.tableHeader,this.tableBody),this.clearButton.addEventListener("click",e)}ascentBasket(){document.addEventListener("click",(t=>{const e=t.target.className;"header__basket-img"===e?this.onOpen():"close"===e?this.onClose():t.composedPath().includes(this.basketContent)||this.onClose()}))}escBasket(){document.addEventListener("keyup",(t=>{"Escape"===t.key&&this.onClose()}))}onOpen(){this.basketModalWindow.style.display="block"}onClose(){this.basketModalWindow.style.display="none"}renderProductsInBasket=t=>{if(this.tableBody.innerHTML="",t.length>0)for(const e of t)this.tableBody.append(d(e));else this.tableBody.append(a())};setTotalPrice=t=>{this.totalPrice.textContent=`Итого: ${t} р.`}}function l(t){const e=document.createElement("div");for(const r in t)e.setAttribute(r,t[r]);return e}function h(t,e){const r=document.createElement("button");r.textContent=t;for(const t in e)r.setAttribute(t,e[t]);return r}var m;m=new URL(n("27Lyk").resolve("aBR22"),import.meta.url).toString();var p;p=new URL(n("27Lyk").resolve("ftrUh"),import.meta.url).toString();var v;v=new URL(n("27Lyk").resolve("MPvta"),import.meta.url).toString();var g;g=new URL(n("27Lyk").resolve("58g3Q"),import.meta.url).toString();var w;w=new URL(n("27Lyk").resolve("gi2sT"),import.meta.url).toString();var S;S=new URL(n("27Lyk").resolve("cCJ8T"),import.meta.url).toString();var k;k=new URL(n("27Lyk").resolve("gbxTc"),import.meta.url).toString();var y;y=new URL(n("27Lyk").resolve("gTinP"),import.meta.url).toString();var f;f=new URL(n("27Lyk").resolve("1Qo5A"),import.meta.url).toString();var b;b=new URL(n("27Lyk").resolve("dXdjT"),import.meta.url).toString();var C;C=new URL(n("27Lyk").resolve("lyKTC"),import.meta.url).toString();var P;P=new URL(n("27Lyk").resolve("d1vay"),import.meta.url).toString();var I;I=new URL(n("27Lyk").resolve("c2cRJ"),import.meta.url).toString();var L;L=new URL(n("27Lyk").resolve("ii5GQ"),import.meta.url).toString();var _;_=new URL(n("27Lyk").resolve("jKs28"),import.meta.url).toString();const B={QuickView:" quick-view",AddToCart:"add-to-cart",RemoveFromCart:"remove-from-cart"},E={InCart:"in-cart",NotInCart:"not-in-cart"};function x({id:t,name:e,price:r,img:s,status:o}){const n=l({class:"card"});n.id=t;const i=l({class:"card__image"}),c=document.createElement("img");c.src=s,c.classList.add("img");const a=l({class:"price-name-wrap"}),d=l({class:"price"});d.textContent=`${r} р.`;const u=l({class:"name"});u.textContent=`${e}`;const m=o===E.InCart,p=h(m?"В корзине":"В корзину",{class:"add-to-cart-button",type:"button","data-product-action":m?B.RemoveFromCart:B.AddToCart,"data-product-id":t});p.classList.add(m?"add-to-cart-button-gray":"add-to-cart-button");const v=h("Быстрый просмотр",{class:"quick-view-button",type:"button","data-product-action":B.QuickView,"data-product-id":t});return n.addEventListener("mouseover",(t=>{const e=t.target;"img"!==e.className&&"quick-view-button"!==e.className||v.classList.add("quick-view-button-active")})),n.addEventListener("mouseout",(t=>{const e=t.target;"img"!==e.className&&"quick-view-button"!==e.className||v.classList.remove("quick-view-button-active")})),a.append(d,u,p),i.append(c),n.append(i,a,v),n}class U{constructor({products:t,onProductAction:e}){this.productsWrap=l({class:"goods__cards"}),this.productsWrap.id="cards",this.productsWrap.addEventListener("click",(({target:t})=>{Object.values(B).includes(t.dataset.productAction)&&e(t.dataset.productAction,t.dataset.productId)})),this.renderProducts(t)}renderProducts=t=>{if(this.productsWrap.innerHTML="",t.length>0)for(const e of t)this.productsWrap.append(x(e));else;}}class R{constructor(){this.prevBtn=document.getElementById("btn-prev"),this.nextBtn=document.getElementById("btn-next"),this.dots=document.querySelectorAll(".dot"),this.slides=document.querySelectorAll(".slide"),this.slides.forEach((t=>{t.addEventListener("touchstart",this.handleTouchStart),t.addEventListener("touchmove",this.handleTouchMove)})),this.index=0,this.x1=null,this.y1=null,this.clickOnDots=this.clickOnDots(),this.slider=this.slider(),this.nextBtn.addEventListener("click",this.nextSlide),this.prevBtn.addEventListener("click",this.prevSlide)}clickOnDots(){this.dots.forEach(((t,e)=>{t.addEventListener("click",(()=>{this.index=e,this.prepareCurrentSlide(this.index)}))}))}prevSlide=()=>{0===this.index?(this.index=this.slides.length-1,this.prepareCurrentSlide(this.index)):(this.index--,this.prepareCurrentSlide(this.index))};nextSlide=()=>{this.index===this.slides.length-1?(this.index=0,this.prepareCurrentSlide(this.index)):(this.index++,this.prepareCurrentSlide(this.index))};prepareCurrentSlide=t=>{this.activeSlide(t),this.activeDot(t)};activeSlide=t=>{for(let t of this.slides)t.classList.remove("active");this.slides[t].classList.add("active")};activeDot=t=>{for(let t of this.dots)t.classList.remove("active");this.dots[t].classList.add("active")};slider(){setInterval(this.nextSlide,5e3)}handleTouchStart=t=>{const e=t.touches[0];this.x1=e.clientX,this.y1=e.clientY};handleTouchMove=t=>{if(!this.x1||!this.y1)return!1;let e=t.touches[0].clientX,r=t.touches[0].clientY,s=e-this.x1,o=r-this.y1;Math.abs(s)>Math.abs(o)&&(s>0?this.prevSlide():this.nextSlide()),this.x1=null,this.y1=null}}function F({img:t}){const e=H;return e.insertAdjacentHTML("afterBegin",`\n        <div class="quick-view__content">\n        <button class="quick-view__content-close" id="close-btn" type="button">X</button>\n        <img class="quick-view__content-image" src="${t}" alt="goods">\n        </div>\n        `),e}const H=document.getElementById("quick-view-modal");class A{constructor(t){this.products=t,this.container=H,document.addEventListener("click",(({target:t})=>{(t.classList.contains("quick-view__content-close")||"quick-view-modal"===t.id)&&(this.container.style.display="none")}))}onQuickView=t=>{this.container.style.display="block";const e=this.products.find((({id:e})=>e===t));e&&this.renderQuickView(this.container,e)};renderQuickView=(t,e)=>{t.innerHTML="",e&&F(e)}}class T{constructor({onProductsSearch:t,onClearSearch:e}){this.searchForm=document.getElementById("search__id"),this.searchRequest=document.getElementById("goods__text"),this.clearSearchButton=document.getElementById("clear-search-button"),this.onProductsSearch=t,this.onClearSearch=e,this.searchForm.addEventListener("submit",this.onSearchFormSubmit),this.clearSearchButton.addEventListener("click",this.onClearSearch)}onSearchFormSubmit=t=>{t.preventDefault();const{value:e}=this.searchForm.elements["search-input"],r=e.trim().toLowerCase(),s=r[0].toUpperCase()+r.slice(1);s&&this.onProductsSearch(s)}}class N{constructor({products:t,onProductAction:e,productsInBasket:r,onClearProductsFromBasket:s,totalPrice:o,onProductsSearch:n,onClearSearch:i}){this.Basket=new u({productsInBasket:r,onClearProductsFromBasket:s,totalPrice:o}),this.Slider=new R,this.quickViewModal=new A(t),this.Products=new U({products:t,onProductAction:e}),this.SearchForm=new T({onProductsSearch:n,onClearSearch:i});document.getElementById("goods-container").append(this.Products.productsWrap)}renderProductsInBasket=t=>{this.Basket.renderProductsInBasket(t)};renderProducts=t=>{this.Products.renderProducts(t)};setTotalPrice=t=>{this.Basket.setTotalPrice(t)}}const q="products";class j{constructor(){this.products=this.getSaveProducts()}setProductStatus=(t,e)=>{const r=this.products.findIndex((({id:e})=>e===t));r>-1&&(this.products[r]={...this.products[r],status:e},localStorage.setItem(q,JSON.stringify(this.products)))};getSaveProducts=()=>{const t=localStorage.getItem(q);return t?JSON.parse(t):[{id:window.crypto.randomUUID(),name:"Брюки",price:100,img:e(m),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Кеды",price:250,img:e(p),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Футболка",price:70,img:e(v),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Куртка",price:300,img:e(g),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Джинсы",price:150,img:e(w),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Туфли",price:100,img:e(S),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Полотенце",price:15,img:e(k),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Расческа",price:50,img:e(y),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Сумка",price:150,img:e(f),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Носки",price:30,img:e(b),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Смартфон",price:350,img:e(C),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Помада",price:50,img:e(P),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Сумка",price:65,img:e(I),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Лонгслив",price:60,img:e(L),status:E.NotInCart},{id:window.crypto.randomUUID(),name:"Юбка",price:65,img:e(_),status:E.NotInCart}]};getProductsInBasket=()=>this.products.filter((({status:t})=>t===E.InCart));removeProductsFromBasket=()=>(this.products.forEach((t=>{t.status=E.NotInCart})),localStorage.setItem(q,JSON.stringify(this.products)),this.products);getTotalPrice=()=>{const t=this.getProductsInBasket();return void 0===t||0===t.length?0:t.reduce(((t,e)=>t+e.price),0)};searchProduct=t=>{let e=[];for(const r of this.products)r.name.includes(t)&&e.push(r);return e}}new class{constructor(){this.model=new j,this.view=new N({products:this.model.products,productsInBasket:this.model.getProductsInBasket(),onProductAction:this.onProductAction,onClearProductsFromBasket:this.onClearProductsFromBasket,totalPrice:this.model.getTotalPrice(),onProductsSearch:this.onProductsSearch,onClearSearch:this.onClearSearch})}setProductStatus=(t,e)=>{this.model.setProductStatus(t,e)};onProductAction=(t,e)=>{t!==B.AddToCart&&t!==B.RemoveFromCart||this.setProductStatus(e,t===B.AddToCart?E.InCart:E.NotInCart),t===B.QuickView&&this.view.quickViewModal.onQuickView(e),this.view.renderProductsInBasket(this.model.getProductsInBasket()),this.view.setTotalPrice(this.model.getTotalPrice()),this.onClearSearch()};onClearProductsFromBasket=()=>{this.model.removeProductsFromBasket(),this.view.renderProductsInBasket(this.model.getProductsInBasket()),this.view.setTotalPrice(this.model.getTotalPrice()),this.onClearSearch()};onProductsSearch=t=>{this.view.renderProducts(this.model.searchProduct(t)),0===Object.keys(this.model.searchProduct(t)).length||void 0===Object.keys(this.model.searchProduct(t))?this.view.SearchForm.searchRequest.textContent="По вашему запросу ничего не найдено":this.view.SearchForm.searchRequest.textContent=t};onClearSearch=()=>{this.view.SearchForm.searchForm.reset(),this.view.SearchForm.searchRequest.textContent="Хиты продаж",this.view.renderProducts(this.model.products)}};
//# sourceMappingURL=index.7c7cd6e4.js.map
